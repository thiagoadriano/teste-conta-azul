var APPCA;!function(t){function e(){}e.$inject=[],angular.module("AppContaAzul",["ngRoute","ngTable"]).run(e)}(APPCA||(APPCA={}));var APPCA;!function(t){function e(t){t.when("/veiculos",{templateUrl:"views/veiculos.html",controller:"VeiculosController",controllerAs:"vm"}).otherwise({redirectTo:"/veiculos"})}e.$inject=["$routeProvider"],angular.module("AppContaAzul").config(e)}(APPCA||(APPCA={}));var APPCA;!function(t){function e(t,e,n,a,o){function i(){var t={initialParams:{count:5},initialSettings:{counts:[],paginationMaxBlocks:13,paginationMinBlocks:2,dataset:[]}};return new e(t.initialParams,t.initialSettings)}function l(){s.listaModelos=[],s.Model.marca&&(s.listaModelos=n.getModelos(s.Model.marca))}function r(){t.getAll().then(function(t){s.lista=t,s.lista.forEach(function(t){t.valorCorrigido="R$ "+(+t.valor).toLocaleString()+",00",t.nomeImagem=o.getNomeImagemLink(t.imagem),t.linhaAtiva=!1}),s.tableView.settings({dataset:s.lista})})}var s=this;s.lista=[],s.listaMarcas=[],s.listaModelos=[],s.titleModal="Incluir",s.allChecks=!1,s.Model=a.model(),s.tableView=i(),s.selecionaModelos=l,s.abrirModal=function(){s.titleModal="Incluir",s.listaModelos=[],s.Model=a.model(),$("#veiculosModal").modal("show")},s.editar=function(t){var e=o.searchItemId(s.lista,t);s.Model=e,s.titleModal="Editar",l(),$("#veiculosModal").modal("show")},s.salvar=function(e){e&&(s.Model.hasOwnProperty("id")?t.atualizar(s.Model):t.save(s.Model))},s.excluir=function(e){o.excluir(e.placa,function(){t.del(e),i(),r()})},s.validaPlaca=function(){var t=s.Model.placa.toLowerCase(),e={texto:/[a-z]{1,3}/,numero:/[0-9]{1,4}/,placa:/[a-z]{3}-[0-9]{4}/};return e.placa.test(t)?s.Model.placa=t.toUpperCase():e.texto.test(t)?s.Model.placa=t.toUpperCase():void(s.Model.placa="")},s.marqueAllChecks=function(){s.lista.forEach(function(t){s.allChecks?t.linhaAtiva=!0:t.linhaAtiva=!1})},s.ativaLinha=function(t){t.linhaAtiva=!t.linhaAtiva,s.allChecks=!1},r(),n.getMarcas().then(function(t){s.listaMarcas=t}),$(document).on("click",'[data-toggle="lightbox"]',function(t){t.preventDefault(),$(this).ekkoLightbox()})}e.$inject=["VeiculosService","NgTableParams","MarcasService","VeiculosModel","UtilHelpers"],angular.module("AppContaAzul").controller("VeiculosController",e)}(APPCA||(APPCA={}));var APPCA;!function(t){function e(){function t(t,e,n){return'<li><p class="alert alert-'+t+' alert-dismissible"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><span class="glyphicon glyphicon-'+e+'"></span> <strong>'+n+"</strong></p></li>"}function e(){return"<div class='alertSystem'><ul class='list-alert'></ul></div>"}function n(t){s(r(t))}function a(t){if("string"==typeof t){if(null!==t.match(/^\[.*\]$/))return o(t);if(null!==t.match(/^\{.*\}$/))return i(t)}else{if(angular.isArray(t))return t.join("<br>");if(angular.isObject(t))return i(JSON.stringify(t))}return t}function o(t){return JSON.parse(t).join("<br>")}function i(t){return t.replace(/^\{(.*)\}$/,"$1").split(",").join("<br>")}function l(){return u.find(".alertSystem").is(":visible")}function r(t){var n=$(t).attr("id",Date.now()).hide();return l()||u.prepend(e()),u.find(".alertSystem .list-alert").append(n).find("li").last().fadeIn()}function s(t){var e=t.attr("id"),n=setTimeout(function(){u.find(".alertSystem").find("#"+e).fadeOut("slow",function(){$(this).remove(),clearTimeout(n),c()})},6e3)}function c(){u.find(".alertSystem").find("li").length||u.find(".alertSystem").empty().remove()}var u=$("main");return{success:function(e){n(t("success","ok-sign",a(e)))},info:function(e){n(t("info","info-sign",a(e)))},warning:function(e){n(t("warning","alert",a(e)))},danger:function(e){n(t("danger","remove-sign",a(e)))}}}e.$inject=[],angular.module("AppContaAzul").factory("MsgInfos",e)}(APPCA||(APPCA={}));var APPCA;!function(t){angular.module("AppContaAzul").factory("UtilHelpers",function(){return{searchItemId:function(t,e){t.sort(function(t,e){return t.id>e.id});for(var n=t.length,a=Math.round(n/2),o=e<=a?0:a;o<e;o++)if(t[o].id===e)return t[o];return null},getNomeImagemLink:function(t){if(t){var e=t.split("/"),n=e[e.length-1];return n=n.replace(/\.[a-z]{3,4}$/,""),(n=n.replace(/(_|\.)/g," ")).substring(0,25)}},excluir:function(t,e,n,a,o){e&&BootstrapDialog.show({type:BootstrapDialog.TYPE_DANGER,size:BootstrapDialog.SIZE_SMALL,title:a||"Excluir Registro",message:o||"Deseja realmente excluir o registro: <br><strong>"+t+"</strong>?",buttons:[{label:"Não",cssClass:"btn-default",action:function(t){t.close(),n&&n()}},{label:"Sim",cssClass:"btn-danger",action:function(t){t.close(),e()}}]})}}})}(APPCA||(APPCA={}));var APPCA;!function(t){angular.module("AppContaAzul").factory("VeiculosModel",function(){var t={combustivel:"",imagem:"",marca:"",modelo:"",placa:"",valor:0};return{model:function(){return t}}})}(APPCA||(APPCA={}));var APPCA;!function(t){function e(t,e){var n=[],a={},o=e.defer();return t.get("data/marcas-veiculos.json").then(function(t){var e=angular.fromJson(t.data);n=e.Marcas,a=e.Modelos,o.resolve(n)}),{getMarcas:function(){return o.promise},getModelos:function(t){return a[t]}}}e.$inject=["$http","$q"],angular.module("AppContaAzul").service("MarcasService",e)}(APPCA||(APPCA={}));var APPCA;!function(t){function e(t,e,n){var a=[];return{getAll:function(){var n=e.defer();return a.length?n.resolve(a):t.get("data/conta-azul-dados.json").then(function(t){a=angular.fromJson(t.data.Veiculos),n.resolve(a)}),n.promise},getOne:function(t){return a[t]},save:function(t){a.push(t),n.success("Veículo cadastrado com sucesso!")},arualizar:function(t){var e=a.indexOf(t);a[e]=t,n.success("Veículo atualizado com sucesso!")},del:function(t){var e=a.indexOf(t);e>=0&&(a.splice(e,1),n.success("Veículo excluido com sucesso!"))}}}e.$inject=["$http","$q","MsgInfos"],angular.module("AppContaAzul").service("VeiculosService",e)}(APPCA||(APPCA={}));
//# sourceMappingURL=maps/app.min.js.map
