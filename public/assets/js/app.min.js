var APPCA;!function(e){function a(){}a.$inject=[],angular.module("AppContaAzul",["ngRoute","ngTable"]).run(a)}(APPCA||(APPCA={}));var APPCA;!function(e){function a(e){e.when("/veiculos",{templateUrl:"views/veiculos.html",controller:"VeiculosController",controllerAs:"vm"}).otherwise({redirectTo:"/veiculos"})}a.$inject=["$routeProvider"],angular.module("AppContaAzul").config(a)}(APPCA||(APPCA={}));var APPCA;!function(e){function a(e,a,t,o,n){function l(){i.listaModelos=[],i.Model.marca&&(i.listaModelos=t.getModelos(i.Model.marca))}function r(){e.getAll().then(function(e){i.lista=e,i.lista.forEach(function(e){e.valorCorrigido="R$ "+(+e.valor).toLocaleString()+",00",e.nomeImagem=n.getNomeImagemLink(e.imagem),e.linhaAtiva=!1}),i.tableView.settings({dataset:i.lista})})}var i=this;i.lista=[],i.listaMarcas=[],i.listaModelos=[],i.titleModal="Incluir",i.Model=o.model(),i.tableView=function(){var e={initialParams:{count:2},initialSettings:{counts:[],paginationMaxBlocks:13,paginationMinBlocks:2,dataset:i.lista}};return new a(e.initialParams,e.initialSettings)}(),i.selecionaModelos=l,i.abrirModal=function(){i.titleModal="Incluir",i.listaModelos=[],i.Model=o.model(),$("#veiculosModal").modal("show")},i.editar=function(e){var a=n.searchItemId(i.lista,e);i.Model=a,i.titleModal="Editar",l(),$("#veiculosModal").modal("show")},i.salvar=function(e){},i.validaPlaca=function(){var e=i.Model.placa.toLowerCase(),a={texto:/[a-z]{1,3}/,numero:/[0-9]{1,4}/,placa:/[a-z]{3}-[0-9]{4}/};return a.placa.test(e)?i.Model.placa=e.toUpperCase():a.texto.test(e)?i.Model.placa=e.toUpperCase():void(i.Model.placa="")},r(),t.getMarcas().then(function(e){i.listaMarcas=e})}a.$inject=["VeiculosService","NgTableParams","MarcasService","VeiculosModel","UtilHelpers"],angular.module("AppContaAzul").controller("VeiculosController",a)}(APPCA||(APPCA={}));var APPCA;!function(e){angular.module("AppContaAzul").factory("UtilHelpers",function(){return{searchItemId:function(e,a){e.sort(function(e,a){return e.id>a.id});for(var t=e.length,o=Math.round(t/2),n=a<=o?0:o;n<a;n++)if(e[n].id===a)return e[n];return null},getNomeImagemLink:function(e){if(e){var a=e.split("/"),t=a[a.length-1];return t=t.replace(/\.[a-z]{3,4}$/,""),(t=t.replace(/(_|\.)/g," ")).substring(0,25)}}}})}(APPCA||(APPCA={}));var APPCA;!function(e){angular.module("AppContaAzul").factory("VeiculosModel",function(){var e={combustivel:"",imagem:"",marca:"",modelo:"",placa:"",valor:0};return{model:function(){return e}}})}(APPCA||(APPCA={}));var APPCA;!function(e){function a(e,a){var t=[],o={},n=a.defer();return e.get("data/marcas-veiculos.json").then(function(e){var a=angular.fromJson(e.data);t=a.Marcas,o=a.Modelos,n.resolve(t)}),{getMarcas:function(){return n.promise},getModelos:function(e){return o[e]}}}a.$inject=["$http","$q"],angular.module("AppContaAzul").service("MarcasService",a)}(APPCA||(APPCA={}));var APPCA;!function(e){function a(e,a){var t=[];return{getAll:function(){var o=a.defer();return t.length?o.resolve(t):e.get("data/conta-azul-dados.json").then(function(e){t=angular.fromJson(e.data.Veiculos),o.resolve(t)}),o.promise},getOne:function(e){return t[e]},save:function(e){t.push(e)},del:function(e){t.splice(e,1)}}}a.$inject=["$http","$q"],angular.module("AppContaAzul").service("VeiculosService",a)}(APPCA||(APPCA={}));
//# sourceMappingURL=maps/app.min.js.map
