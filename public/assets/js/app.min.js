var APPCA;!function(t){function a(){}a.$inject=[],angular.module("AppContaAzul",["ngRoute","ngTable"]).run(a)}(APPCA||(APPCA={}));var APPCA;!function(t){function a(t){t.when("/veiculos",{templateUrl:"views/veiculos.html",controller:"VeiculosController",controllerAs:"vm"}).otherwise({redirectTo:"/veiculos"})}a.$inject=["$routeProvider"],angular.module("AppContaAzul").config(a)}(APPCA||(APPCA={}));var APPCA;!function(t){function a(t,a,e,o,n){function l(){r.listaModelos=[],r.Model.marca&&(r.listaModelos=e.getModelos(r.Model.marca))}function i(){t.getAll().then(function(t){r.lista=t,r.lista.forEach(function(t){t.valorCorrigido="R$ "+(+t.valor).toLocaleString()+",00",t.nomeImagem=n.getNomeImagemLink(t.imagem),t.linhaAtiva=!1}),r.tableView.settings({dataset:r.lista})})}var r=this;r.lista=[],r.listaMarcas=[],r.listaModelos=[],r.titleModal="Incluir",r.allChecks=!1,r.Model=o.model(),r.tableView=function(){var t={initialParams:{count:2},initialSettings:{counts:[],paginationMaxBlocks:13,paginationMinBlocks:2,dataset:r.lista}};return new a(t.initialParams,t.initialSettings)}(),r.selecionaModelos=l,r.abrirModal=function(){r.titleModal="Incluir",r.listaModelos=[],r.Model=o.model(),$("#veiculosModal").modal("show")},r.editar=function(t){var a=n.searchItemId(r.lista,t);r.Model=a,r.titleModal="Editar",l(),$("#veiculosModal").modal("show")},r.salvar=function(t){},r.excluir=function(t){n.excluir(t.placa,function(){})},r.validaPlaca=function(){var t=r.Model.placa.toLowerCase(),a={texto:/[a-z]{1,3}/,numero:/[0-9]{1,4}/,placa:/[a-z]{3}-[0-9]{4}/};return a.placa.test(t)?r.Model.placa=t.toUpperCase():a.texto.test(t)?r.Model.placa=t.toUpperCase():void(r.Model.placa="")},r.marqueAllChecks=function(){r.lista.forEach(function(t){r.allChecks?t.linhaAtiva=!0:t.linhaAtiva=!1})},r.ativaLinha=function(t){t.linhaAtiva=!t.linhaAtiva,r.allChecks=!1},i(),e.getMarcas().then(function(t){r.listaMarcas=t}),$(document).on("click",'[data-toggle="lightbox"]',function(t){t.preventDefault(),$(this).ekkoLightbox()})}a.$inject=["VeiculosService","NgTableParams","MarcasService","VeiculosModel","UtilHelpers"],angular.module("AppContaAzul").controller("VeiculosController",a)}(APPCA||(APPCA={}));var APPCA;!function(t){angular.module("AppContaAzul").factory("UtilHelpers",function(){return{searchItemId:function(t,a){t.sort(function(t,a){return t.id>a.id});for(var e=t.length,o=Math.round(e/2),n=a<=o?0:o;n<a;n++)if(t[n].id===a)return t[n];return null},getNomeImagemLink:function(t){if(t){var a=t.split("/"),e=a[a.length-1];return e=e.replace(/\.[a-z]{3,4}$/,""),(e=e.replace(/(_|\.)/g," ")).substring(0,25)}},excluir:function(t,a,e,o,n){a&&BootstrapDialog.show({type:BootstrapDialog.TYPE_DANGER,size:BootstrapDialog.SIZE_SMALL,title:o||"Excluir Registro",message:n||"Deseja realmente excluir o registro: <br><strong>"+t+"</strong>?",buttons:[{label:"NÃ£o",cssClass:"btn-default",action:function(t){t.close(),e&&e()}},{label:"Sim",cssClass:"btn-danger",action:function(t){t.close(),a()}}]})}}})}(APPCA||(APPCA={}));var APPCA;!function(t){angular.module("AppContaAzul").factory("VeiculosModel",function(){var t={combustivel:"",imagem:"",marca:"",modelo:"",placa:"",valor:0};return{model:function(){return t}}})}(APPCA||(APPCA={}));var APPCA;!function(t){function a(t,a){var e=[],o={},n=a.defer();return t.get("data/marcas-veiculos.json").then(function(t){var a=angular.fromJson(t.data);e=a.Marcas,o=a.Modelos,n.resolve(e)}),{getMarcas:function(){return n.promise},getModelos:function(t){return o[t]}}}a.$inject=["$http","$q"],angular.module("AppContaAzul").service("MarcasService",a)}(APPCA||(APPCA={}));var APPCA;!function(t){function a(t,a){var e=[];return{getAll:function(){var o=a.defer();return e.length?o.resolve(e):t.get("data/conta-azul-dados.json").then(function(t){e=angular.fromJson(t.data.Veiculos),o.resolve(e)}),o.promise},getOne:function(t){return e[t]},save:function(t){e.push(t)},del:function(t){e.splice(t,1)}}}a.$inject=["$http","$q"],angular.module("AppContaAzul").service("VeiculosService",a)}(APPCA||(APPCA={}));
//# sourceMappingURL=maps/app.min.js.map
